<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Video Blend Text Effect</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: Helvetica, sans-serif;
      overflow: hidden;
      background: black;
    }

    #background-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
    }

    .controls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 3;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 8px;
      min-width: 250px;
    }

    .control-group {
      margin-bottom: 15px;
    }

    .controls label {
      color: white;
      font-size: 14px;
      margin-bottom: 5px;
      display: block;
    }

    .controls select {
      padding: 8px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      font-size: 14px;
      cursor: pointer;
      width: 100%;
    }

    .controls input[type="range"] {
      width: 100%;
      margin-top: 5px;
    }

    .controls .value-display {
      color: white;
      font-size: 12px;
      text-align: right;
      margin-top: 2px;
    }

    .vibration-demo {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }

    .vibration {
      margin: 20px 0;
      position: relative;
    }

    .vibration span {
      font-size: 120px;
      font-weight: 900;
      display: inline-block;
      margin-right: 10px;
      transition: all 500ms;
      text-transform: uppercase;
      color: white;
      mix-blend-mode: difference;
    }

    .vibration span.vibrate {
      animation: vibrate 50ms linear infinite forwards;
    }

    @keyframes vibrate {
      0% {
        transform: translateX(-1px) translateY(1px);
      }
      100% {
        transform: translateX(1px) translateY(-2px);
      }
    }
  </style>
</head>
<body>
  <video id="background-video" autoplay loop muted playsinline>
    <source src="back.mp4" type="video/mp4">
  </video>

  <div class="controls">
    <div class="control-group">
      <label for="text-blend">Blend Mode:</label>
      <select id="text-blend">
        <option value="normal">Normal</option>
        <option value="multiply">Multiply</option>
        <option value="screen">Screen</option>
        <option value="overlay">Overlay</option>
        <option value="darken">Darken</option>
        <option value="lighten">Lighten</option>
        <option value="color-dodge">Color Dodge</option>
        <option value="color-burn">Color Burn</option>
        <option value="hard-light">Hard Light</option>
        <option value="soft-light">Soft Light</option>
        <option value="difference" selected>Difference</option>
        <option value="exclusion">Exclusion</option>
        <option value="hue">Hue</option>
        <option value="saturation">Saturation</option>
        <option value="color">Color</option>
        <option value="luminosity">Luminosity</option>
      </select>
    </div>

    <div class="control-group">
      <label for="hue-rotate">Hue Rotation:</label>
      <input type="range" id="hue-rotate" min="0" max="360" value="0">
      <div class="value-display" id="hue-value">0°</div>
    </div>

    <div class="control-group">
      <label for="color-picker">Text Color:</label>
      <input type="color" id="color-picker" value="#ffffff" style="width: 100%">
    </div>

    <div class="control-group">
      <label for="opacity">Opacity:</label>
      <input type="range" id="opacity" min="0" max="100" value="100">
      <div class="value-display" id="opacity-value">100%</div>
    </div>
  </div>

  <div class="vibration-demo">
    <div class="vibration">INSERT</div>
    <div class="vibration">SUN'O3.08</div>
    <div class="vibration">BAR OOST</div>
  </div>

  <script>
    const video = document.getElementById('background-video');
    const textBlendSelect = document.getElementById('text-blend');
    const hueRotateSlider = document.getElementById('hue-rotate');
    const opacitySlider = document.getElementById('opacity');
    const colorPicker = document.getElementById('color-picker');
    const hueValue = document.getElementById('hue-value');
    const opacityValue = document.getElementById('opacity-value');

    function updateTextStyles() {
      const hue = hueRotateSlider.value;
      const opacity = opacitySlider.value;
      const color = colorPicker.value;

      document.querySelectorAll('.vibration span').forEach(span => {
        span.style.filter = `hue-rotate(${hue}deg)`;
        span.style.opacity = opacity / 100;
        span.style.color = color;
      });

      hueValue.textContent = `${hue}°`;
      opacityValue.textContent = `${opacity}%`;
    }

    function applyBlendMode(mode) {
      document.querySelectorAll('.vibration span').forEach(span => {
        span.style.mixBlendMode = mode;
      });
    }

    // Video autoplay
    video.play().catch(function(error) {
      console.log("Video autoplay failed:", error);
    });

    // Event listeners for controls
    textBlendSelect.addEventListener('change', (e) => {
      applyBlendMode(e.target.value);
    });

    hueRotateSlider.addEventListener('input', updateTextStyles);
    opacitySlider.addEventListener('input', updateTextStyles);
    colorPicker.addEventListener('input', updateTextStyles);

    // Text animation setup
    const vibrationBlocks = document.querySelectorAll('.vibration');

    vibrationBlocks.forEach(block => {
      if (![...block.childNodes].some(n => n.nodeName === 'SPAN')) {
        const text = block.textContent.trim();
        block.textContent = '';
        text.split('').forEach(letter => {
          const span = document.createElement('span');
          span.textContent = letter;
          block.appendChild(span);
        });
      }
    });

    // Apply initial styles
    applyBlendMode(textBlendSelect.value);
    updateTextStyles();

    function randomVibrate() {
      vibrationBlocks.forEach(block => {
        const spans = block.querySelectorAll('span');
        spans.forEach(span => span.classList.remove('vibrate'));

        const count = Math.floor(Math.random() * spans.length / 2) + 1;
        for (let i = 0; i < count; i++) {
          const index = Math.floor(Math.random() * spans.length);
          spans[index].classList.add('vibrate');
        }
      });
    }

    setInterval(randomVibrate, 200);

    // Double-click to toggle video play/pause
    document.addEventListener('dblclick', () => {
      if (video.paused) {
        video.play();
      } else {
        video.pause();
      }
    });
  </script>
</body>
</html>